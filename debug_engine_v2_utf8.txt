============================= test session starts =============================
platform win32 -- Python 3.13.1, pytest-7.4.0, pluggy-1.6.0 -- C:\Users\astir\Desktop\AI_Company\AI_Investor\venv\Scripts\python.exe
cachedir: .pytest_cache
rootdir: C:\Users\astir\Desktop\AI_Company\AI_Investor
configfile: pytest.ini
plugins: anyio-4.12.1, asyncio-0.21.1, base-url-2.1.0
asyncio: mode=Mode.AUTO
collecting ... collected 4 items

tests/ai_predictions/test_prediction_engine.py::test_predict_price PASSED [ 25%]
tests/ai_predictions/test_prediction_engine.py::test_predict_price_different_horizons PASSED [ 50%]
tests/ai_predictions/test_prediction_engine.py::test_predict_trend PASSED [ 75%]
tests/ai_predictions/test_prediction_engine.py::test_predict_price_cached FAILED [100%]

================================== FAILURES ===================================
__________________________ test_predict_price_cached __________________________
tests\ai_predictions\test_prediction_engine.py:85: in test_predict_price_cached
    result = await service.predict_price("AAPL", "1m")
services\ai_predictions\prediction_engine.py:69: in predict_price
    return PricePrediction(**cached_data)
E   pydantic_core._pydantic_core.ValidationError: 3 validation errors for PricePrediction
E   prediction_id
E     Field required [type=missing, input_value={'symbol': 'AAPL', 'predi...5, 'time_horizon': '1m'}, input_type=dict]
E       For further information visit https://errors.pydantic.dev/2.12/v/missing
E   prediction_date
E     Field required [type=missing, input_value={'symbol': 'AAPL', 'predi...5, 'time_horizon': '1m'}, input_type=dict]
E       For further information visit https://errors.pydantic.dev/2.12/v/missing
E   model_version
E     Field required [type=missing, input_value={'symbol': 'AAPL', 'predi...5, 'time_horizon': '1m'}, input_type=dict]
E       For further information visit https://errors.pydantic.dev/2.12/v/missing
============================== warnings summary ===============================
tests/ai_predictions/test_prediction_engine.py::test_predict_price
tests/ai_predictions/test_prediction_engine.py::test_predict_price_different_horizons
tests/ai_predictions/test_prediction_engine.py::test_predict_price_different_horizons
tests/ai_predictions/test_prediction_engine.py::test_predict_price_different_horizons
tests/ai_predictions/test_prediction_engine.py::test_predict_price_different_horizons
tests/ai_predictions/test_prediction_engine.py::test_predict_price_different_horizons
  C:\Users\astir\Desktop\AI_Company\AI_Investor\services\ai_predictions\prediction_engine.py:90: DeprecationWarning: datetime.datetime.utcnow() is deprecated and scheduled for removal in a future version. Use timezone-aware objects to represent datetimes in UTC: datetime.datetime.now(datetime.UTC).
    prediction_id=f"pred_{symbol}_{datetime.utcnow().timestamp()}",

tests/ai_predictions/test_prediction_engine.py::test_predict_price
tests/ai_predictions/test_prediction_engine.py::test_predict_price_different_horizons
tests/ai_predictions/test_prediction_engine.py::test_predict_price_different_horizons
tests/ai_predictions/test_prediction_engine.py::test_predict_price_different_horizons
tests/ai_predictions/test_prediction_engine.py::test_predict_price_different_horizons
tests/ai_predictions/test_prediction_engine.py::test_predict_price_different_horizons
  C:\Users\astir\Desktop\AI_Company\AI_Investor\services\ai_predictions\prediction_engine.py:94: DeprecationWarning: datetime.datetime.utcnow() is deprecated and scheduled for removal in a future version. Use timezone-aware objects to represent datetimes in UTC: datetime.datetime.now(datetime.UTC).
    prediction_date=datetime.utcnow(),

tests/ai_predictions/test_prediction_engine.py::test_predict_price
tests/ai_predictions/test_prediction_engine.py::test_predict_price_different_horizons
tests/ai_predictions/test_prediction_engine.py::test_predict_price_different_horizons
tests/ai_predictions/test_prediction_engine.py::test_predict_price_different_horizons
tests/ai_predictions/test_prediction_engine.py::test_predict_price_different_horizons
tests/ai_predictions/test_prediction_engine.py::test_predict_price_different_horizons
  C:\Users\astir\Desktop\AI_Company\AI_Investor\services\ai_predictions\prediction_engine.py:149: PydanticDeprecatedSince20: The `dict` method is deprecated; use `model_dump` instead. Deprecated in Pydantic V2.0 to be removed in V3.0. See Pydantic V2 Migration Guide at https://errors.pydantic.dev/2.12/migration/
    self.cache_service.set(cache_key, prediction.dict(), ttl=86400 * 7)  # 7 days

tests/ai_predictions/test_prediction_engine.py::test_predict_price
tests/ai_predictions/test_prediction_engine.py::test_predict_price_different_horizons
tests/ai_predictions/test_prediction_engine.py::test_predict_price_different_horizons
tests/ai_predictions/test_prediction_engine.py::test_predict_price_different_horizons
tests/ai_predictions/test_prediction_engine.py::test_predict_price_different_horizons
tests/ai_predictions/test_prediction_engine.py::test_predict_price_different_horizons
  C:\Users\astir\Desktop\AI_Company\AI_Investor\services\ai_predictions\prediction_engine.py:153: PydanticDeprecatedSince20: The `dict` method is deprecated; use `model_dump` instead. Deprecated in Pydantic V2.0 to be removed in V3.0. See Pydantic V2 Migration Guide at https://errors.pydantic.dev/2.12/migration/
    self.cache_service.set(id_key, prediction.dict(), ttl=86400 * 7)

tests/ai_predictions/test_prediction_engine.py::test_predict_trend
  C:\Users\astir\Desktop\AI_Company\AI_Investor\services\ai_predictions\prediction_engine.py:130: DeprecationWarning: datetime.datetime.utcnow() is deprecated and scheduled for removal in a future version. Use timezone-aware objects to represent datetimes in UTC: datetime.datetime.now(datetime.UTC).
    prediction_id=f"trend_{symbol}_{datetime.utcnow().timestamp()}",

-- Docs: https://docs.pytest.org/en/stable/how-to/capture-warnings.html
=========================== short test summary info ===========================
FAILED tests/ai_predictions/test_prediction_engine.py::test_predict_price_cached
================== 1 failed, 3 passed, 25 warnings in 0.59s ===================
