# Stabilization Cycle H: Analytics & Portfolio Management

## Goal
Stabilize the "Brain" of the AI Investor. This cycle covers advanced financial analysis, portfolio construction, tax strategies, and optimization engines.

## Objectives
1.  **Audit**: Run tests for Analysis, Analytics, Portfolio, Tax, and Optimization groups.
2.  **Fix**: Resolve failures, focusing on:
    - NumPy/Pandas compatibility issues.
    - Floating point precision errors in financial calculations.
    - Mocking of external data feeds (Polygon, FRED, etc.) in analysis services.
3.  **Verify**: Ensure 100% pass rate.

## Scope

### Group H1: Financial Core (Analysis & Analytics)
- `services/analysis/` (Backtesting, Monte Carlo, Attribution, Technical Analysis)
- `tests/analysis/`
- `services/analytics/`
- `tests/analytics/`

### Group H2: Portfolio Management (Portfolio & Optimization)
- `services/portfolio/` (Rebalancing, Allocations)
- `tests/portfolio/`
- `services/optimization/` (MVO, Black-Litterman)
- `tests/optimization/`

### Group H3: Tax Strategy
- `services/tax/` (Harvesting, Lot Matching)
- `tests/tax/`

## Strategy
1.  **Initial Audit**:
    - Run `pytest tests/analysis/ tests/analytics/ tests/portfolio/ tests/optimization/ tests/tax/`
2.  **Analysis**:
    - Expect potential timeout issues with heavy computations (Monte Carlo).
    - Expect "Dimension mismatch" errors in matrix operations.
3.  **Remediation**:
    - Ensure `pytest-asyncio` is used correctly for async analysis jobs.
    - verify `random.seed` is set for deterministic Monte Carlo tests.

## Verification
- Run the full "Group H" suite.
