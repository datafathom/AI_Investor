{
    "commands": {
        "start-all": {
            "description": "Start all AI Investor services and agents.",
            "handler": "scripts.runners.system_control:start_all"
        },
        "seed-db": {
            "description": "Seed the database with initial user and test data.",
            "handler": "scripts.runners.seed_db:run_seed_db"
        },
        "check-backend": {
            "description": "Quickly check backend health status via HTTP.",
            "handler": "scripts.runners.system_control:check_backend"
        },
        "start-backend": {
            "description": "Start the Flask backend on the host (Windows).",
            "handler": "scripts.runners.system_control:start_backend"
        },
        "start-frontend": {
            "description": "Start the React frontend on the host (Windows).",
            "handler": "scripts.runners.system_control:start_frontend"
        },
        "check-port": {
            "description": "Check if a specific port is listening on the host.",
            "arguments": [
                {
                    "name": "port",
                    "type": "integer",
                    "default": 5050,
                    "help": "Port to check"
                }
            ],
            "handler": "scripts.runners.system_control:check_port"
        },
        "check-runtimes": {
            "description": "Check if dev ports (5050, 5173) are listening.",
            "handler": "scripts.runners.system_control:check_runtimes"
        },
        "stop-all": {
            "description": "Gracefully stop all services.",
            "handler": "scripts.runners.system_control:stop_all"
        },
        "reset-dev": {
            "description": "Unified Reset: Stop/Prune, Start, and Seed.",
            "handler": "scripts.runners.system_control:reset_dev"
        },
        "demo-start": {
            "description": "Stop prev runtimes and start Backend/Frontend in new windows.",
            "handler": "scripts.runners.system_control:run_demo_mode"
        },
        "dev": {
            "description": "Developer Mode: Hot-Reload for Backend & Frontend (Auto-check local infra).",
            "handler": "scripts.runners.dev_runner:start_dev_mode"
        },
        "dev-full": {
            "description": "Full Dev Mode: Starts Docker Containers + Backend + Frontend locally.",
            "handler": "scripts.runners.dev_runner:start_dev_full"
        },
        "dev-no-db": {
            "description": "Light Dev Mode: Backend + Frontend ONLY (For 2-Node setups).",
            "handler": "scripts.runners.dev_runner:start_dev_no_db"
        },
        "verify-pipeline": {
            "description": "Run End-to-End verification of the Data->Signal->Trade pipeline.",
            "handler": "scripts.runners.system_control:verify_pipeline"
        },
        "build-frontend": {
            "description": "Build the frontend2 production bundle.",
            "handler": "scripts.runners.frontend_control:run_frontend_build"
        },
        "clean-build": {
            "description": "Sanitize JSX files and build the frontend.",
            "handler": "scripts.runners.frontend_control:run_clean_build"
        },
        "docker": {
            "description": "Docker infrastructure management",
            "subcommands": {
                "up": {
                    "description": "Start Docker containers (localhost only)",
                    "flags": [
                        {
                            "name": "build",
                            "type": "boolean",
                            "default": false,
                            "help": "Rebuild images before starting"
                        },
                        {
                            "name": "profile",
                            "type": "string",
                            "default": "full",
                            "help": "Docker Compose profile to run (e.g. storage, graph, full)"
                        }
                    ],
                    "handler": "scripts.runners.docker_control:docker_up"
                },
                "down": {
                    "description": "Stop Docker containers",
                    "handler": "scripts.runners.docker_control:docker_down"
                },
                "status": {
                    "description": "Show Docker container status",
                    "handler": "scripts.runners.docker_control:docker_status"
                },
                "logs": {
                    "description": "View/Follow Docker container logs",
                    "flags": [
                        {
                            "name": "service",
                            "type": "string",
                            "default": "",
                            "help": "Specific service to log (e.g. backend, frontend)"
                        },
                        {
                            "name": "follow",
                            "type": "boolean",
                            "default": true,
                            "help": "Follow log output"
                        }
                    ],
                    "handler": "scripts.runners.docker_control:docker_logs"
                },
                "ps": {
                    "description": "Show Docker container status (formatted table)",
                    "handler": "scripts.runners.docker_control:docker_ps"
                }
            }
        },
        "api": {
            "description": "API Documentation and interaction tools",
            "subcommands": {
                "build-docs": {
                    "description": "Generate OpenAPI and Postman collection files",
                    "handler": "scripts.runners.api_docs:build_docs"
                },
                "serve-docs": {
                    "description": "Serve interactive Swagger UI",
                    "handler": "scripts.runners.api_docs:serve_docs"
                }
            }
        },
        "infra": {
            "description": "Infrastructure and LAN distribution management",
            "subcommands": {
                "cert-generate": {
                    "description": "Generate SSL certificates for LAN IP or Service",
                    "flags": [
                        {
                            "name": "ip",
                            "type": "string",
                            "default": "",
                            "help": "Target LAN IP"
                        },
                        {
                            "name": "service",
                            "type": "string",
                            "default": "",
                            "help": "Target service (pulls IP from .env)"
                        }
                    ],
                    "handler": "scripts.runners.cert_runner:generate_certs"
                },
                "set-lan-ip": {
                    "description": "Configure .env with global LAN Box IP mapping",
                    "arguments": [
                        {
                            "name": "ip",
                            "type": "string",
                            "required": true,
                            "help": "IP address of the LAN Box"
                        }
                    ],
                    "handler": "scripts.runners.cert_runner:set_lan_ip"
                },
                "set-host": {
                    "description": "Configure .env for a specific service host",
                    "arguments": [
                        {
                            "name": "service",
                            "type": "string",
                            "required": true,
                            "help": "Service name (e.g. postgres, neo4j)"
                        },
                        {
                            "name": "ip",
                            "type": "string",
                            "required": true,
                            "help": "Host IP for the service"
                        }
                    ],
                    "handler": "scripts.runners.cert_runner:set_host"
                },
                "init-node": {
                    "description": "Bootstrap a new node in the distributed cluster",
                    "arguments": [
                        {
                            "name": "ip",
                            "type": "string",
                            "required": true,
                            "help": "IP address of this node"
                        }
                    ],
                    "flags": [
                        {
                            "name": "roles",
                            "type": "string",
                            "default": "full",
                            "help": "Service roles to run (e.g. database, graph, full)"
                        }
                    ],
                    "handler": "scripts.runners.cert_runner:init_node"
                }
            }
        },
        "docker-ps": {
            "description": "Quickly show Docker container status (shorthand for docker ps)",
            "handler": "scripts.runners.docker_control:docker_ps"
        },
        "test-ingestion": {
            "description": "Test Phase 6 data ingestion pipeline.",
            "arguments": [
                {
                    "name": "symbol",
                    "type": "string",
                    "default": "SPY",
                    "help": "Ticker symbol to fetch"
                }
            ],
            "handler": "scripts.runners.test_data_ingestion:run_test_ingestion"
        },
        "test-crowd": {
            "description": "Test Phase 7 Crowd Wisdom (Google Trends) logic.",
            "handler": "scripts.runners.test_crowd_wisdom:run_test_crowd_wisdom"
        },
        "test-broker": {
            "description": "Test Phase 24 Broker (Robinhood) integration.",
            "flags": [
                {
                    "name": "mock",
                    "type": "boolean",
                    "default": false,
                    "help": "Run in simulation mode"
                }
            ],
            "handler": "scripts.runners.test_broker:run_test_broker"
        },
        "backfill-history": {
            "description": "Backfill historical OHLCV data from Alpha Vantage.",
            "arguments": [
                {
                    "name": "symbol",
                    "type": "string",
                    "default": "SPY",
                    "help": "Ticker symbol to backfill"
                }
            ],
            "flags": [
                {
                    "name": "size",
                    "type": "string",
                    "default": "compact",
                    "help": "Output size: 'compact' or 'full'"
                }
            ],
            "handler": "scripts.runners.historical_backfill:run_historical_backfill"
        },
        "persist-trends": {
            "description": "Fetch and persist Google Trends scores to Neo4j.",
            "flags": [
                {
                    "name": "keywords",
                    "type": "string",
                    "default": "margin call,AMZN debt",
                    "help": "Comma-separated keywords"
                }
            ],
            "handler": "scripts.runners.persist_trends:run_persist_trends"
        },
        "test-reddit": {
            "description": "Test Phase 8 Social NLP (Reddit + FinBERT) logic.",
            "flags": [
                {
                    "name": "tickers",
                    "type": "string",
                    "default": "TSLA,NVDA,SPY",
                    "help": "Comma-separated tickers"
                }
            ],
            "handler": "scripts.runners.test_reddit:run_test_reddit"
        },
        "test-options": {
            "description": "Test Phase 9 Options Flow Tracking logic.",
            "arguments": [
                {
                    "name": "symbol",
                    "type": "string",
                    "default": "TSLA",
                    "help": "Ticker symbol to fetch options for"
                }
            ],
            "flags": [
                {
                    "name": "mock",
                    "type": "boolean",
                    "default": false,
                    "help": "Run in simulation mode"
                }
            ],
            "handler": "scripts.runners.test_options_flow:run_test_options_flow"
        },
        "test-macro": {
            "description": "Test Phase 10 Macro Data Integration (FRED).",
            "flags": [
                {
                    "name": "mock",
                    "type": "boolean",
                    "default": false,
                    "help": "Run with simulated macro data"
                }
            ],
            "handler": "scripts.runners.test_macro:run_test_macro"
        },
        "test-fusion": {
            "description": "Test Phase 11 Data Fusion & Normalization.",
            "arguments": [
                {
                    "name": "symbol",
                    "type": "string",
                    "default": "TSLA",
                    "help": "Ticker symbol"
                }
            ],
            "flags": [
                {
                    "name": "mock",
                    "type": "boolean",
                    "default": false,
                    "help": "Run with simulated data"
                }
            ],
            "handler": "scripts.runners.test_fusion:run_test_fusion"
        },
        "test-fear-greed": {
            "description": "Test Phase 12 Fear & Greed Composite Index.",
            "flags": [
                {
                    "name": "symbols",
                    "type": "string",
                    "default": "SPY,QQQ,AAPL,TSLA,NVDA",
                    "help": "Comma-separated ticker symbols"
                },
                {
                    "name": "mock",
                    "type": "boolean",
                    "default": false,
                    "help": "Run with simulated data"
                }
            ],
            "handler": "scripts.runners.test_fear_greed:run_test_fear_greed"
        },
        "test-features": {
            "description": "Test Phase 13 Feature Engineering Pipeline.",
            "arguments": [
                {
                    "name": "symbol",
                    "type": "string",
                    "default": "SPY",
                    "help": "Ticker symbol to analyze"
                }
            ],
            "flags": [
                {
                    "name": "benchmark",
                    "type": "boolean",
                    "default": false,
                    "help": "Run performance benchmark"
                }
            ],
            "handler": "scripts.runners.test_feature_engineering:run_test_features"
        },
        "test-prediction": {
            "description": "Test Phase 14 Predictive Modeling.",
            "arguments": [
                {
                    "name": "symbol",
                    "type": "string",
                    "default": "SPY",
                    "help": "Ticker symbol"
                }
            ],
            "flags": [
                {
                    "name": "train",
                    "type": "boolean",
                    "default": false,
                    "help": "Force retraining"
                }
            ],
            "handler": "scripts.runners.test_prediction:run_test_prediction"
        },
        "test-factors": {
            "description": "Test Phase 15 Factor Analysis.",
            "handler": "scripts.runners.test_factor_analysis:run_test_factors"
        },
        "test-defensive-shield": {
            "description": "Test Phase 16 Defensive Shield.",
            "handler": "scripts.runners.test_defensive_shield:run_test_shield"
        },
        "test-aggressive-alpha": {
            "description": "Test Phase 17 Aggressive Alpha.",
            "handler": "scripts.runners.test_aggressive_alpha:run_test_aggressive"
        },
        "test-dynamic-allocator": {
            "description": "Test Phase 18 Dynamic Allocator.",
            "handler": "scripts.runners.test_dynamic_allocator:run_test_allocator"
        },
        "test-tax-harvesting": {
            "description": "Test Phase 19 Tax Loss Harvesting.",
            "handler": "scripts.runners.test_tax_harvesting:run_test_harvesting"
        },
        "test-risk-monitor": {
            "description": "Test Phase 20 Real-time Risk Monitor.",
            "handler": "scripts.runners.test_risk_monitor:run_test_risk"
        },
        "test-circuit-breaker": {
            "description": "Test Phase 21 Volatility Circuit Breakers.",
            "handler": "scripts.runners.test_circuit_breaker:run_test_circuit_breaker"
        },
        "test-stress-test": {
            "description": "Test Phase 22 Stress Testing Suite.",
            "handler": "scripts.runners.test_stress_test:run_test_stress"
        },
        "test-paper-trading": {
            "description": "Test Phase 23 Paper Trading Simulator.",
            "handler": "scripts.runners.test_paper_trading:run_test_paper"
        },
        "test-broker-integration": {
            "description": "Test Phase 24 Broker Integration.",
            "handler": "scripts.runners.test_broker_integration:run_test_broker"
        },
        "test-sor": {
            "description": "Test Phase 25 Smart Order Routing.",
            "handler": "scripts.runners.test_sor:run_test_sor"
        },
        "test-algo-execution": {
            "description": "Test Phase 26 Algorithmic Execution.",
            "handler": "scripts.runners.test_algo_execution:run_test_algo"
        },
        "test-morning-briefing": {
            "description": "Test Phase 29 Morning Briefing Generation.",
            "handler": "scripts.runners.test_morning_briefing:run_test_briefing"
        },
        "test-health-check": {
            "description": "Test Phase 31 System Health Monitor.",
            "handler": "scripts.runners.test_health_check:run_health_check"
        },
        "test-security": {
            "description": "Test Phase 32 Encryption Service.",
            "handler": "scripts.runners.test_security_service:run_test_security"
        },
        "test-rebalance": {
            "description": "Test Phase 33 Autonomous Rebalancing.",
            "handler": "scripts.runners.test_rebalancing:run_test_rebalance"
        },
        "test-backtest-v2": {
            "description": "Test Phase 34 Event-Driven Backtesting Engine.",
            "handler": "scripts.runners.test_backtesting_v2:run_backtest_v2"
        },
        "test-hype": {
            "description": "Test Phase 35 Visual Hype Tracking.",
            "handler": "scripts.runners.test_hype_tracking:run_test_hype"
        },
        "test-politics": {
            "description": "Test Phase 36 Political Alpha Tracker.",
            "handler": "scripts.runners.test_politics:run_test_politics"
        },
        "test-quandl": {
            "description": "Test Phase 4 Quandl Integration (Short Interest).",
            "arguments": [
                {
                    "name": "symbol",
                    "type": "string",
                    "default": "TSLA",
                    "help": "Ticker symbol to test"
                }
            ],
            "flags": [
                {
                    "name": "mock",
                    "type": "boolean",
                    "default": false,
                    "help": "Run in simulation mode"
                }
            ],
            "handler": "scripts.runners.test_quandl:run_test_quandl"
        },
        "test-finnhub": {
            "description": "Test Phase 5 Finnhub Integration (IPO & News).",
            "flags": [
                {
                    "name": "mock",
                    "type": "boolean",
                    "default": false,
                    "help": "Run in simulation mode"
                }
            ],
            "handler": "scripts.runners.test_finnhub:run_test_finnhub"
        },
        "test-news": {
            "description": "Test Phase 6 NewsAPI Integration (Sentiment).",
            "arguments": [
                {
                    "name": "topic",
                    "type": "string",
                    "default": "market",
                    "help": "Keyword or ticker to search"
                }
            ],
            "flags": [
                {
                    "name": "mock",
                    "type": "boolean",
                    "default": false,
                    "help": "Run in simulation mode"
                }
            ],
            "handler": "scripts.runners.test_news:run_test_news"
        },
        "test-crypto": {
            "description": "Test Phase 7 CryptoCompare Integration.",
            "arguments": [
                {
                    "name": "symbols",
                    "type": "string",
                    "default": "BTC,ETH",
                    "help": "Comma-separated list of symbols"
                }
            ],
            "flags": [
                {
                    "name": "mock",
                    "type": "boolean",
                    "default": false,
                    "help": "Run in simulation mode"
                }
            ],
            "handler": "scripts.runners.test_crypto:run_test_crypto"
        },
        "test-reddit": {
            "description": "Test Phase 8 Reddit Integration (Mock).",
            "arguments": [
                {
                    "name": "subreddit",
                    "type": "string",
                    "default": "wallstreetbets",
                    "help": "Target subreddit"
                }
            ],
            "flags": [
                {
                    "name": "mock",
                    "type": "boolean",
                    "default": true,
                    "help": "Force simulation mode"
                }
            ],
            "handler": "scripts.runners.test_reddit:run_test_reddit"
        },
        "test-debate": {
            "description": "Test Phase 9 Anthropic Debate Chamber (Mock).",
            "arguments": [
                {
                    "name": "ticker",
                    "type": "string",
                    "default": "SPY",
                    "help": "Symbol to debate"
                }
            ],
            "flags": [
                {
                    "name": "mock",
                    "type": "boolean",
                    "default": true,
                    "help": "Force simulation mode"
                }
            ],
            "handler": "scripts.runners.test_debate:run_test_debate"
        },
        "test-gemini": {
            "description": "Test Phase 10 Gemini Briefing (Mock).",
            "arguments": [],
            "flags": [
                {
                    "name": "mock",
                    "type": "boolean",
                    "default": true,
                    "help": "Force simulation mode"
                }
            ],
            "handler": "scripts.runners.test_gemini:run_test_gemini"
        },
        "test-research": {
            "description": "Test Phase 11 Perplexity Research (Mock).",
            "arguments": [
                {
                    "name": "query",
                    "type": "string",
                    "default": "Why is NVDA up today?",
                    "help": "Question to ask"
                }
            ],
            "flags": [
                {
                    "name": "mock",
                    "type": "boolean",
                    "default": true,
                    "help": "Force simulation mode"
                }
            ],
            "handler": "scripts.runners.test_research:run_test_research"
        },
        "test-stripe": {
            "description": "Test Phase 12 Stripe Billing (Mock).",
            "arguments": [
                {
                    "name": "action",
                    "type": "string",
                    "default": "checkout",
                    "help": "Action to test: checkout, subscription"
                }
            ],
            "flags": [
                {
                    "name": "mock",
                    "type": "boolean",
                    "default": true,
                    "help": "Force simulation mode"
                }
            ],
            "handler": "scripts.runners.test_stripe:run_test_stripe"
        },
        "test-paypal": {
            "description": "Test Phase 13 PayPal (Mock).",
            "arguments": [
                {
                    "name": "action",
                    "type": "string",
                    "default": "order",
                    "help": "Action to test: order"
                }
            ],
            "flags": [
                {
                    "name": "mock",
                    "type": "boolean",
                    "default": true,
                    "help": "Force simulation mode"
                }
            ],
            "handler": "scripts.runners.test_paypal:run_test_paypal"
        },
        "test-venmo": {
            "description": "Test Phase 14 Venmo (Mock).",
            "arguments": [
                {
                    "name": "amount",
                    "type": "float",
                    "default": 29.00,
                    "help": "Amount to pay"
                }
            ],
            "flags": [
                {
                    "name": "mock",
                    "type": "boolean",
                    "default": true,
                    "help": "Force simulation mode"
                }
            ],
            "handler": "scripts.runners.test_venmo:run_test_venmo"
        },
        "test-square": {
            "description": "Test Phase 15 Square Merchant (Mock).",
            "arguments": [
                {
                    "name": "action",
                    "type": "string",
                    "default": "stats",
                    "help": "Action to test: stats, catalog"
                }
            ],
            "flags": [
                {
                    "name": "mock",
                    "type": "boolean",
                    "default": true,
                    "help": "Force simulation mode"
                }
            ],
            "handler": "scripts.runners.test_square:run_test_square"
        },
        "test-plaid": {
            "description": "Test Phase 16 Plaid Banking (Mock).",
            "arguments": [
                {
                    "name": "action",
                    "type": "string",
                    "default": "flow",
                    "help": "Action to test: flow"
                }
            ],
            "flags": [
                {
                    "name": "mock",
                    "type": "boolean",
                    "default": true,
                    "help": "Force simulation mode"
                }
            ],
            "handler": "scripts.runners.test_plaid:run_test_plaid"
        },
        "test-coinbase": {
            "description": "Test Phase 17 Coinbase Wallet (Mock).",
            "arguments": [
                {
                    "name": "action",
                    "type": "string",
                    "default": "balance",
                    "help": "Action to test: balance, transactions"
                }
            ],
            "flags": [
                {
                    "name": "mock",
                    "type": "boolean",
                    "default": true,
                    "help": "Force simulation mode"
                }
            ],
            "handler": "scripts.runners.test_coinbase:run_test_coinbase"
        },
        "test-binance": {
            "description": "Test Phase 18 Binance Exchange (Mock).",
            "arguments": [
                {
                    "name": "action",
                    "type": "string",
                    "default": "ticker",
                    "help": "Action to test: ticker, depth, trade"
                }
            ],
            "flags": [
                {
                    "name": "mock",
                    "type": "boolean",
                    "default": true,
                    "help": "Force simulation mode"
                },
                {
                    "name": "symbol",
                    "type": "string",
                    "default": "BTCUSDT",
                    "help": "Symbol to trade/query"
                }
            ],
            "handler": "scripts.runners.test_binance:run_test_binance"
        },
        "test-tax-harvesting": {
            "description": "Test Phase 19 Tax Loss Harvesting (Mock).",
            "arguments": [
                {
                    "name": "action",
                    "type": "string",
                    "default": "analyze",
                    "help": "Action to test: analyze"
                }
            ],
            "flags": [
                {
                    "name": "mock",
                    "type": "boolean",
                    "default": true,
                    "help": "Force simulation mode"
                }
            ],
            "handler": "scripts.runners.test_tax_harvesting:run_test_tax_harvesting"
        },
        "test-twilio": {
            "description": "Test Phase 20 Twilio SMS (Mock).",
            "arguments": [
                {
                    "name": "action",
                    "type": "string",
                    "default": "send",
                    "help": "Action to test: send"
                }
            ],
            "flags": [
                {
                    "name": "mock",
                    "type": "boolean",
                    "default": true,
                    "help": "Force simulation mode"
                },
                {
                    "name": "to",
                    "type": "string",
                    "default": "+15551234567",
                    "help": "Recipient phone number"
                }
            ],
            "handler": "scripts.runners.test_twilio:run_test_twilio"
        },
        "test-sendgrid": {
            "description": "Test Phase 21 SendGrid Email (Mock).",
            "arguments": [
                {
                    "name": "action",
                    "type": "string",
                    "default": "send",
                    "help": "Action to test: send"
                }
            ],
            "flags": [
                {
                    "name": "mock",
                    "type": "boolean",
                    "default": true,
                    "help": "Force simulation mode"
                },
                {
                    "name": "to",
                    "type": "string",
                    "default": "user@example.com",
                    "help": "Recipient email"
                }
            ],
            "handler": "scripts.runners.test_sendgrid:run_test_sendgrid"
        },
        "test-pagerduty": {
            "description": "Test Phase 22 PagerDuty Incidents (Mock).",
            "arguments": [
                {
                    "name": "action",
                    "type": "string",
                    "default": "trigger",
                    "help": "Action to test: trigger, list"
                }
            ],
            "flags": [
                {
                    "name": "mock",
                    "type": "boolean",
                    "default": true,
                    "help": "Force simulation mode"
                }
            ],
            "handler": "scripts.runners.test_pagerduty:run_test_pagerduty"
        },
        "test-slack": {
            "description": "Test Phase 23 Slack Integration (Mock).",
            "arguments": [
                {
                    "name": "action",
                    "type": "string",
                    "default": "post",
                    "help": "Action to test: post, list"
                }
            ],
            "flags": [
                {
                    "name": "mock",
                    "type": "boolean",
                    "default": true,
                    "help": "Force simulation mode"
                },
                {
                    "name": "channel",
                    "type": "string",
                    "default": "#general",
                    "help": "Target channel"
                }
            ],
            "handler": "scripts.runners.test_slack:run_test_slack"
        },
        "test": {
            "description": "Run test suites by category",
            "subcommands": {
                "list": {
                    "description": "List all available test categories",
                    "handler": "scripts.runners.test_runner:list_test_categories"
                },
                "all": {
                    "description": "Run all tests across the entire application",
                    "flags": [
                        {
                            "name": "verbose",
                            "short": "v",
                            "type": "boolean",
                            "default": false,
                            "help": "Verbose output"
                        },
                        {
                            "name": "coverage",
                            "type": "boolean",
                            "default": false,
                            "help": "Generate coverage report"
                        },
                        {
                            "name": "parallel",
                            "short": "n",
                            "type": "boolean",
                            "default": false,
                            "help": "Run tests in parallel"
                        },
                        {
                            "name": "fail-fast",
                            "short": "x",
                            "type": "boolean",
                            "default": false,
                            "help": "Stop on first failure"
                        },
                        {
                            "name": "html",
                            "type": "boolean",
                            "default": false,
                            "help": "Generate HTML test report"
                        }
                    ],
                    "handler": "scripts.runners.test_runner:run_test_category",
                    "arguments": [
                        {
                            "name": "category",
                            "type": "string",
                            "default": "all",
                            "help": "Test category (default: all)"
                        }
                    ]
                },
                "backend": {
                    "description": "Run all backend service tests",
                    "flags": [
                        {
                            "name": "verbose",
                            "short": "v",
                            "type": "boolean",
                            "default": false
                        },
                        {
                            "name": "coverage",
                            "type": "boolean",
                            "default": false
                        },
                        {
                            "name": "parallel",
                            "short": "n",
                            "type": "boolean",
                            "default": false
                        },
                        {
                            "name": "fail-fast",
                            "short": "x",
                            "type": "boolean",
                            "default": false
                        }
                    ],
                    "handler": "scripts.runners.test_runner:run_test_category",
                    "arguments": [
                        {
                            "name": "category",
                            "type": "string",
                            "default": "backend"
                        }
                    ]
                },
                "frontend": {
                    "description": "Run frontend component tests",
                    "flags": [
                        {
                            "name": "verbose",
                            "short": "v",
                            "type": "boolean",
                            "default": false
                        },
                        {
                            "name": "coverage",
                            "type": "boolean",
                            "default": false
                        }
                    ],
                    "handler": "scripts.runners.test_runner:run_test_category",
                    "arguments": [
                        {
                            "name": "category",
                            "type": "string",
                            "default": "frontend"
                        }
                    ]
                },
                "api": {
                    "description": "Run API endpoint tests",
                    "flags": [
                        {
                            "name": "verbose",
                            "short": "v",
                            "type": "boolean",
                            "default": false
                        },
                        {
                            "name": "coverage",
                            "type": "boolean",
                            "default": false
                        },
                        {
                            "name": "parallel",
                            "short": "n",
                            "type": "boolean",
                            "default": false
                        }
                    ],
                    "handler": "scripts.runners.test_runner:run_test_category",
                    "arguments": [
                        {
                            "name": "category",
                            "type": "string",
                            "default": "api"
                        }
                    ]
                },
                "models": {
                    "description": "Run Pydantic model validation tests",
                    "flags": [
                        {
                            "name": "verbose",
                            "short": "v",
                            "type": "boolean",
                            "default": false
                        },
                        {
                            "name": "coverage",
                            "type": "boolean",
                            "default": false
                        }
                    ],
                    "handler": "scripts.runners.test_runner:run_test_category",
                    "arguments": [
                        {
                            "name": "category",
                            "type": "string",
                            "default": "models"
                        }
                    ]
                },
                "quick": {
                    "description": "Run quick smoke tests for critical paths",
                    "flags": [
                        {
                            "name": "verbose",
                            "short": "v",
                            "type": "boolean",
                            "default": false
                        }
                    ],
                    "handler": "scripts.runners.test_runner:run_test_category",
                    "arguments": [
                        {
                            "name": "category",
                            "type": "string",
                            "default": "quick"
                        }
                    ]
                },
                "unit": {
                    "description": "Run all unit tests (services and models)",
                    "flags": [
                        {
                            "name": "verbose",
                            "short": "v",
                            "type": "boolean",
                            "default": false
                        },
                        {
                            "name": "coverage",
                            "type": "boolean",
                            "default": false
                        }
                    ],
                    "handler": "scripts.runners.test_runner:run_test_category",
                    "arguments": [
                        {
                            "name": "category",
                            "type": "string",
                            "default": "unit"
                        }
                    ]
                },
                "integration": {
                    "description": "Run integration tests (APIs and frontend)",
                    "flags": [
                        {
                            "name": "verbose",
                            "short": "v",
                            "type": "boolean",
                            "default": false
                        },
                        {
                            "name": "coverage",
                            "type": "boolean",
                            "default": false
                        }
                    ],
                    "handler": "scripts.runners.test_runner:run_test_category",
                    "arguments": [
                        {
                            "name": "category",
                            "type": "string",
                            "default": "integration"
                        }
                    ]
                }
            }
        },
        "test-category": {
            "description": "Run tests for a specific category (use test list to see all categories)",
            "arguments": [
                {
                    "name": "category",
                    "type": "string",
                    "required": true,
                    "help": "Test category name (e.g., backend-phase1, api-trading, models-core)"
                }
            ],
            "flags": [
                {
                    "name": "verbose",
                    "short": "v",
                    "type": "boolean",
                    "default": false,
                    "help": "Verbose output"
                },
                {
                    "name": "coverage",
                    "type": "boolean",
                    "default": false,
                    "help": "Generate coverage report"
                },
                {
                    "name": "parallel",
                    "short": "n",
                    "type": "boolean",
                    "default": false,
                    "help": "Run tests in parallel"
                },
                {
                    "name": "fail-fast",
                    "short": "x",
                    "type": "boolean",
                    "default": false,
                    "help": "Stop on first failure"
                },
                {
                    "name": "html",
                    "type": "boolean",
                    "default": false,
                    "help": "Generate HTML test report"
                }
            ],
            "handler": "scripts.runners.test_runner:run_test_category"
        },
        "frontend": {
            "description": "Frontend operations (React/Vite)",
            "subcommands": {
                "dev": {
                    "description": "Start frontend development server",
                    "flags": [
                        {
                            "name": "port",
                            "type": "integer",
                            "default": 5173,
                            "help": "Port to run dev server on"
                        }
                    ],
                    "handler": "scripts.runners.frontend_runner:run_frontend_command",
                    "arguments": [
                        {
                            "name": "command",
                            "type": "string",
                            "default": "dev"
                        }
                    ]
                },
                "build": {
                    "description": "Build frontend for production",
                    "handler": "scripts.runners.frontend_runner:run_frontend_command",
                    "arguments": [
                        {
                            "name": "command",
                            "type": "string",
                            "default": "build"
                        }
                    ]
                },
                "preview": {
                    "description": "Preview production build",
                    "handler": "scripts.runners.frontend_runner:run_frontend_command",
                    "arguments": [
                        {
                            "name": "command",
                            "type": "string",
                            "default": "preview"
                        }
                    ]
                },
                "install": {
                    "description": "Install frontend dependencies",
                    "handler": "scripts.runners.frontend_runner:run_frontend_command",
                    "arguments": [
                        {
                            "name": "command",
                            "type": "string",
                            "default": "install"
                        }
                    ]
                },
                "lint": {
                    "description": "Run frontend linter",
                    "handler": "scripts.runners.frontend_runner:run_frontend_command",
                    "arguments": [
                        {
                            "name": "command",
                            "type": "string",
                            "default": "lint"
                        }
                    ]
                },
                "verify": {
                    "description": "Verify frontend setup",
                    "handler": "scripts.runners.frontend_runner:run_frontend_command",
                    "arguments": [
                        {
                            "name": "command",
                            "type": "string",
                            "default": "verify"
                        }
                    ]
                }
            }
        },
        "backend": {
            "description": "Backend operations (Flask/Python)",
            "subcommands": {
                "dev": {
                    "description": "Start backend development server",
                    "flags": [
                        {
                            "name": "port",
                            "type": "integer",
                            "default": 5050,
                            "help": "Port to run server on"
                        },
                        {
                            "name": "host",
                            "type": "string",
                            "default": "127.0.0.1",
                            "help": "Host to bind to"
                        }
                    ],
                    "handler": "scripts.runners.backend_runner:run_backend_command",
                    "arguments": [
                        {
                            "name": "command",
                            "type": "string",
                            "default": "dev"
                        }
                    ]
                },
                "prod": {
                    "description": "Start backend production server (Gunicorn)",
                    "flags": [
                        {
                            "name": "workers",
                            "type": "integer",
                            "default": 4,
                            "help": "Number of worker processes"
                        },
                        {
                            "name": "port",
                            "type": "integer",
                            "default": 5050,
                            "help": "Port to run server on"
                        }
                    ],
                    "handler": "scripts.runners.backend_runner:run_backend_command",
                    "arguments": [
                        {
                            "name": "command",
                            "type": "string",
                            "default": "prod"
                        }
                    ]
                },
                "install": {
                    "description": "Install backend dependencies",
                    "handler": "scripts.runners.backend_runner:run_backend_command",
                    "arguments": [
                        {
                            "name": "command",
                            "type": "string",
                            "default": "install"
                        }
                    ]
                },
                "verify": {
                    "description": "Verify backend setup",
                    "handler": "scripts.runners.backend_runner:run_backend_command",
                    "arguments": [
                        {
                            "name": "command",
                            "type": "string",
                            "default": "verify"
                        }
                    ]
                }
            }
        },
        "deploy": {
            "description": "Deployment operations",
            "subcommands": {
                "prod": {
                    "description": "Deploy to production",
                    "flags": [
                        {
                            "name": "env",
                            "type": "string",
                            "help": "Environment file path"
                        }
                    ],
                    "handler": "scripts.runners.deployment_runner:run_deployment_command",
                    "arguments": [
                        {
                            "name": "command",
                            "type": "string",
                            "default": "prod"
                        }
                    ]
                },
                "rollback": {
                    "description": "Rollback deployment",
                    "handler": "scripts.runners.deployment_runner:run_deployment_command",
                    "arguments": [
                        {
                            "name": "command",
                            "type": "string",
                            "default": "rollback"
                        }
                    ]
                },
                "build": {
                    "description": "Build Docker images",
                    "handler": "scripts.runners.deployment_runner:run_deployment_command",
                    "arguments": [
                        {
                            "name": "command",
                            "type": "string",
                            "default": "build"
                        }
                    ]
                },
                "health": {
                    "description": "Check deployment health",
                    "handler": "scripts.runners.deployment_runner:run_deployment_command",
                    "arguments": [
                        {
                            "name": "command",
                            "type": "string",
                            "default": "health"
                        }
                    ]
                }
            }
        },
        "db": {
            "description": "Database operations",
            "subcommands": {
                "migrate": {
                    "description": "Run database migrations",
                    "flags": [
                        {
                            "name": "direction",
                            "type": "string",
                            "default": "up",
                            "help": "Migration direction: up or down"
                        },
                        {
                            "name": "migration-id",
                            "type": "string",
                            "help": "Specific migration to run"
                        }
                    ],
                    "handler": "scripts.runners.database_runner:run_db_command",
                    "arguments": [
                        {
                            "name": "command",
                            "type": "string",
                            "default": "migrate"
                        }
                    ]
                },
                "backup": {
                    "description": "Backup database",
                    "flags": [
                        {
                            "name": "type",
                            "type": "string",
                            "default": "all",
                            "help": "Backup type: postgres, neo4j, or all"
                        }
                    ],
                    "handler": "scripts.runners.database_runner:run_db_command",
                    "arguments": [
                        {
                            "name": "command",
                            "type": "string",
                            "default": "backup"
                        }
                    ]
                },
                "restore": {
                    "description": "Restore database from backup",
                    "flags": [
                        {
                            "name": "file",
                            "type": "string",
                            "required": true,
                            "help": "Backup file path"
                        },
                        {
                            "name": "type",
                            "type": "string",
                            "default": "postgres",
                            "help": "Database type: postgres or neo4j"
                        }
                    ],
                    "handler": "scripts.runners.database_runner:run_db_command",
                    "arguments": [
                        {
                            "name": "command",
                            "type": "string",
                            "default": "restore"
                        }
                    ]
                },
                "status": {
                    "description": "Check migration status",
                    "handler": "scripts.runners.database_runner:run_db_command",
                    "arguments": [
                        {
                            "name": "command",
                            "type": "string",
                            "default": "status"
                        }
                    ]
                }
            }
        },
        "pip-test": {
            "description": "Test pip calculation for a specific pair.",
            "arguments": [
                {
                    "name": "pair",
                    "type": "string",
                    "required": true,
                    "help": "Currency pair (e.g., GBP/USD)"
                },
                {
                    "name": "p1",
                    "type": "string",
                    "required": true,
                    "help": "Start price"
                },
                {
                    "name": "p2",
                    "type": "string",
                    "required": true,
                    "help": "End price"
                }
            ],
            "handler": "scripts.runners.pip_runner:run_pip_test"
        },
        "pip-benchmark": {
            "description": "Run accuracy benchmarks for pip calculations.",
            "handler": "scripts.runners.pip_runner:run_pip_benchmark"
        },
        "demo-reset": {
            "description": "Reset demo account balance.",
            "handler": "scripts.runners.demo_runner:run_demo_reset"
        },
        "demo-trade": {
            "description": "Execute a demo trade.",
            "arguments": [
                {
                    "name": "symbol",
                    "type": "string",
                    "required": true,
                    "help": "Symbol"
                },
                {
                    "name": "side",
                    "type": "string",
                    "required": true,
                    "help": "BUY or SELL"
                },
                {
                    "name": "qty",
                    "type": "string",
                    "required": true,
                    "help": "Quantity"
                },
                {
                    "name": "price",
                    "type": "string",
                    "required": true,
                    "help": "Current Price"
                }
            ],
            "handler": "scripts.runners.demo_runner:run_demo_trade"
        },
        "test-searcher": {
            "description": "Run Searcher Agent manual scan.",
            "handler": "scripts.runners.searcher_runner:run_test_searcher"
        },
        "test-protector": {
            "description": "Test Protector Agent validation.",
            "arguments": [
                {
                    "name": "amount",
                    "type": "string",
                    "required": true,
                    "help": "Risk amount"
                },
                 {
                    "name": "daily_loss",
                    "type": "string",
                    "required": false,
                    "default": "0.0",
                    "help": "Current daily loss"
                }
            ],
            "handler": "scripts.runners.protector_runner:run_test_protector"
        }
    }
}